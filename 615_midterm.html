<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chenghao Xia">

<title>615-midterm</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="615_midterm_files/libs/clipboard/clipboard.min.js"></script>
<script src="615_midterm_files/libs/quarto-html/quarto.js"></script>
<script src="615_midterm_files/libs/quarto-html/popper.min.js"></script>
<script src="615_midterm_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="615_midterm_files/libs/quarto-html/anchor.min.js"></script>
<link href="615_midterm_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="615_midterm_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="615_midterm_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="615_midterm_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="615_midterm_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">615-midterm</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chenghao Xia </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<section id="detail-document" class="level3">
<h3 class="anchored" data-anchor-id="detail-document">Detail Document</h3>
<p>We start data cleaning with Detail table.</p>
<p>First, we identify the type of event that relates to the flood. We chose “Flash Flood”, “Flood”, “Coastal Flood” and “Lakeshore Flood” as our new event_type variable.</p>
<p>Then we check if all the data here has the year equal to 2020/2021. And we prove that all the values are in 2020/2021.</p>
<p>Finally, we find “Damage_Property” and “Damage_crops” should be changed into numeric for future calculation, then we remove “K” and times 1000 for the value.</p>
</section>
<section id="fema-document" class="level3">
<h3 class="anchored" data-anchor-id="fema-document">FEMA document</h3>
<p>And now we start data cleaning with Fema Documents.</p>
<p>First we choose “Flood” in “incidentType”</p>
<p>And then find the year which falls into 2020 and 2021.</p>
</section>
</section>
<section id="eda" class="level2">
<h2 class="anchored" data-anchor-id="eda">EDA</h2>
<section id="flood-distribution" class="level3">
<h3 class="anchored" data-anchor-id="flood-distribution">Flood distribution</h3>
<p>First, we have a bar plot to show the appearance of these four event type in order to see the distribution</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

VariableName      Description                                                               
----------------  --------------------------------------------------------------------------
Flash Flood       A sudden and rapid flooding of an area                                    
Flood             When water covers normally dry land                                       
Coastal Flood     When water from the ocean or sea rises and inundates coastal areas        
Lakeshore Flood   A flooding event that specifically affects areas near the shores of lakes </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It is clear that “Flash Flood” has a dominant position, and “Flood” also has a much higher value compared to “Coastal Flood” and “Lakeshore Flood”. But it is also clear that the total count of floods in 2021 is much bigger than the total count of floods in 2020.</p>
</section>
<section id="injuries-and-deaths" class="level3">
<h3 class="anchored" data-anchor-id="injuries-and-deaths">Injuries and Deaths</h3>
<p>Then we consider which flood will bring the most injuries and deaths.</p>
<p>First, we may introduce injuries and deaths.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

VariableName            Description                                                       
----------------------  ------------------------------------------------------------------
Injuries_Direct(ID)     The number of people get hurt dircetly because of weather event   
Injuries_indirect(II)   The number of people get hurt indirectly because of weather event 
Deaths_Direct(DD)       The number of people die directly because of weather event        
Deaths_Indirect(DI)     The number of people die indirectly because of weather event      </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For Injuries_Direct, “Flash Flood” has a dominant position over others in both 2020 and 2021.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Since the amount of Injuries_Indirect is not a lot, we can not say there is a big difference between 2020 and 2021 though the distribution is different.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For Deaths_Direct, “Flash Flood” has a dominant position over others in both 2020 and 2021.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Since the number of indirect injuries is not large, we cannot say there is a big difference between 2020 and 2021, though the distribution is different.</p>
<p>As a short summary, the distributions of injuries and deaths for 2020 and 2021 are pretty similar. For direct injuries and deaths, we can make the hypothesis that “flash flood” is most common but dangerous since it has a dominant position among all four types of flood. For indirect injuries and deaths, we cannot draw any conclusions since the total count is too small and the distribution is different in 2020 and 2021.</p>
</section>
<section id="flood-cause" class="level3">
<h3 class="anchored" data-anchor-id="flood-cause">Flood Cause</h3>
<p>Then we will consider how floods are distributed in order to prevent them</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                   P_2020.Var1 P_2020.Freq
1                               4.98333838
2            Dam / Levee Break  0.15146925
3                   Heavy Rain 88.53377764
4       Heavy Rain / Burn Area  0.28779158
5       Heavy Rain / Snow Melt  3.62011512
6 Heavy Rain / Tropical System  2.13571645
7                      Ice Jam  0.24235080
8          Planned Dam Release  0.04544078</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                   P_2021.Var1 P_2021.Freq
1                               3.27241819
2            Dam / Levee Break  0.09916419
3                   Heavy Rain 92.47768806
4       Heavy Rain / Burn Area  1.69995750
5       Heavy Rain / Snow Melt  0.12749681
6 Heavy Rain / Tropical System  2.15327950
7                      Ice Jam  0.15582944
8          Planned Dam Release  0.01416631</code></pre>
</div>
</div>
<p>Compared to 2020 and 2021, “heavy rain” has a dominant position in the flood cause. It does make sense since heavy rain is the most common event that will happen in our daily lives. But it is hard for the government to prevent floods. If the government finds out there is heavy rain, they will not conclude there will be a flood.</p>
</section>
<section id="damage-to-property-or-crops" class="level3">
<h3 class="anchored" data-anchor-id="damage-to-property-or-crops">Damage to property or crops</h3>
<p>Since the flood cause cannot help us prevent the flood, we are going to find the relationship between month and damage property or damage crop.</p>
<p>If there is a relationship between month and damage cost, the government can focus more attention on the high-cost month.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

VariableName         Description                                                              
-------------------  -------------------------------------------------------------------------
Damage of Property   The estimated amount of damage to property incurred by the weather event 
Damage of Crops      The estimated amount of damage to crops incurred by the weather event    </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see the damage to property has a few similarities between 2020 and 2021. They both have a high value for September. But in May 2020, it had a high flood value, which didn’t happen in May 2021. Similar to that, in August 2021, it has a low value, which August 2020 doesn’t have.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see the damage to crops is similar for both 2020 and 2021, since July and August are two near months. We can make the hypothesis that in July and August, the damage to crops is the most severe among the whole year.</p>
</section>
<section id="state" class="level3">
<h3 class="anchored" data-anchor-id="state">State</h3>
<p>By looking at the cost per month, we want to find which states experience the lot floods.</p>
<p>First, we have histograms with the top ten values of flood states</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It is interesting since the number of states with floods is totally different between 2020 and 2021. Maybe we can make the hypothesis that some states often get a lot of floods, but for most states, the floods are random, and it is hard to predict whether the next year will be more or less.</p>
</section>
</section>
<section id="fema-eda" class="level2">
<h2 class="anchored" data-anchor-id="fema-eda">FEMA EDA</h2>
<p>First we make some explanation of these variables</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

VariableName        Description                                                                   
------------------  ------------------------------------------------------------------------------
ihProgramDeclared   Whether the Individuals and Households program was declared for this disaster 
iaProgramDeclared   Whether the Individual Assistance program was declared for this disaster      
paProgramDeclared   Whether the Public Assistance program was declared for this disaster          
hmProgramDeclared   Whether the Hazard Mitigation program was declared for this disaster          </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="615_midterm_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see Individual Assistance program didn’t declared in the flood during 2020 and 2021, while Public Assistance program was declared a little time. Hazard Mitigation program was declared almost every time</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>For the flood during 2020 and 2021, “flash flood” and “flood” are the main parts of the event. But “Flash Flood” is the most dangerous since more than 80% of people were hurt or died because of it. And the main cause of floods is “heavy rain,” which accounts for approximately 90% of all the causes. It does make sense since “heavy rain” is the most common event we can meet every day.</p>
<p>Looking at the damage to property and crops, August and September are two months in which property and crops will be damaged. Although there are some abnormal values between 2020 and 2021, the overall distribution still has a lot of similarities. But when we compare the top 10 states that experienced the most floods, there is a big difference between 2020 and 2021. So we can make the hypothesis that the flood will occur in different states over the years.</p>
<p>With the Fema data, we can see the Individual Assistance Program wasn’t declared in the flood during 2020 and 2021, which means this program has a lot of work to do compared to the Hazard Mitigation Program, which was declared almost every time. The other two programs had some differences but did work in some case.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>